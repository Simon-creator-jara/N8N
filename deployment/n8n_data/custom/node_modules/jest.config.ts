import type { Config } from '@jest/types';
import { join } from 'path';

const rootDir = join(__dirname);

const config: Config.InitialOptions = {
    testPathIgnorePatterns: ['<rootDir>/node_modules/', '<rootDir>/dist/'],
    coverageDirectory: join(`${rootDir}`, '/coverage/'), //  Ruta donde quedar√° los reportes
    coverageReporters: ['html', 'json', 'text', 'lcov', 'cobertura'],
    reporters: [
        'default',
        [
            'jest-junit',
            { outputDirectory: './coverage/', outputName: 'junit.xml' },
        ],
        'jest-sonar',
    ],
    moduleFileExtensions: ['js', 'json', 'ts'],
    rootDir: './',
    testRegex: '.*\\.spec\\.ts$',
    transform: {
        '^.+\\.(t|j)s$': 'ts-jest',
    },
    collectCoverage: true,
    collectCoverageFrom: [
        '**/*.(t|j)s',
        '!**/*.model.ts',
        '!**/main.ts',
        '!**/*.module.ts',
        '!**/config/**',
    ],
    testEnvironment: 'node',
};

export default config;
